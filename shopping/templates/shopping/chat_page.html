{% extends "shopping/base.html" %}
{% block content %}
{% load static %}
{% load bootstrap4 %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Gognoos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <style>
        .footer-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #222;
    color: white;
    text-align: center;
    padding: 10px;
    box-shadow: 0 -2px 5px rgba(0,0,0,0.2);
    z-index: 10000;
}
body {
    padding-bottom: 80px;
}
    </style>
  </head>
  <body>
<ul>
    {% for chat in chats %}
    <li class="text-decoration-none d-block ">
        {% if chat.sender == user %}
        <div class="alert alert-primary" role="alert" style="background-color:#7ebe77;width:  calc(100vw - 100px);">
        <p>{{chat.text}}</p>
        {% if chat.admin_read %}
        <i class="bi bi-check2-all">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check2-all" viewBox="0 0 16 16">
  <path d="M12.354 4.354a.5.5 0 0 0-.708-.708L5 10.293 1.854 7.146a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0zm-4.208 7-.896-.897.707-.707.543.543 6.646-6.647a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0"/>
  <path d="m5.354 7.146.896.897-.707.707-.897-.896a.5.5 0 1 1 .708-.708"/>
</svg>
        </i>
        {% else %}
        <i class="bi bi-check2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
  <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
</svg>
        </i>
        {% endif %}
        </div>
        {% else %}
        <div style="justify-items: right;">
        <div class="alert alert-success" role="alert" style="width: calc(100vw - 100px); justify-items: right;">
        <p>{{chat.text}}</p>
        </div>    
        </div>
        
        {% endif %}
        
        
    </li>
    {% endfor %}
</ul>
<div class="footer-bar" style="flex-wrap: wrap; display: flex;">
    <form action="{% url 'shopping:chat_page' %}" method="post" class="form" style="display: flex;">
        <div style="width: calc(100vw - 180px); margin-left: 7px;">
        {% csrf_token %}
        {% bootstrap_form form %}    
        </div>
        
        {% buttons %}
        <button name="submit" class="btn btn-success" style="display: flex;margin-top: 1px; margin-left: 10px;">Send</button>
        {% endbuttons %}
    </form>
    <a href="tel: +989031204587">{% buttons %}
    <button name="submit" class="btn btn-success" style="display: flex;margin-top: 1px; margin-left: 10px;">Call</button>
    {% endbuttons %}</a>
</div>    
</body>
{% endblock content %}